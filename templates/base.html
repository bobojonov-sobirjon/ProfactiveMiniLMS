<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>{% block title %}Profactive{% endblock %}</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/output.css' %}">
  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <!-- AOS CSS -->
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <script defer src="https://api-maps.yandex.ru/2.1/?lang=en"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  {% block extra_css %}{% endblock %}
</head>
<body>
  <!-- Header -->
  {% if user.is_authenticated %}
    <!-- Logged in user header -->
    <header x-data="{ open: false }"
      x-init="$watch('open', value => document.body.classList.toggle('overflow-hidden', value))" class="py-6">
      <nav class="container-base flex items-center justify-between gap-5">
        <!-- Logo -->
        <a href="{% url 'home' %}">
          <img class="h-16 md:h-20 lg:h-26" src="{% static 'assets/svgs/logo.svg' %}" alt="Logo">
        </a>

        <!-- Links -->
        <div class="hidden items-center gap-9.5">
          <a href="{% url 'about' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            О нас
          </a>
          <a href="{% url 'services' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Услуги
          </a>
          <div class="relative group">
            <a class="flex items-center gap-3.5 transition duration-200 hover:text-brand-yellow-500"
              href="{% url 'course-catalogue' %}">
              <span class="text-lg">
                Каталог курсов
              </span>
              <svg width="14" height="8" viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M6.99999 5.17192L11.95 0.221924L13.364 1.63592L6.99999 7.99992L0.635986 1.63592L2.04999 0.221924L6.99999 5.17192Z"
                  fill="url(#paint0_linear_4001_5)" />
                <defs>
                  <linearGradient id="paint0_linear_4001_5" x1="10.512" y1="1.1797" x2="5.01273" y2="7.04877"
                    gradientUnits="userSpaceOnUse">
                    <stop stop-color="#AB803B" />
                    <stop offset="0.235294" stop-color="#CDB14F" />
                    <stop offset="0.490196" stop-color="#F0E263" />
                    <stop offset="0.733333" stop-color="#D9B84A" />
                    <stop offset="1" stop-color="#C28D31" />
                  </linearGradient>
                </defs>
              </svg>
            </a>

            <div class="absolute z-10 hidden group-hover:block bg-white w-55 rounded-lg p-3 space-y-1.5">
              <a class="block text-primary hover-opacity-75" href="{% url 'course-catalogue' %}">
                Каталог курсов
              </a>
              <a class="block text-primary hover-opacity-75" href="{% url 'services' %}">
                Услуги
              </a>
            </div>
          </div>
          <a href="{% url 'referal' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Предложения
          </a>
          <a href="{% url 'blog' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Блог
          </a>
          <a href="{% url 'reviews' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Отзывы
          </a>
          <a href="{% url 'contacts' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Контакты
          </a>
        </div>

        <!-- Login & Mobile Menu -->
        <div class="flex items-center gap-6 font-semibold">
          <a href="{% url 'courses:my_courses' %}"
            class="max-lg:hidden font-semibold border-gradient px-5 lg:px-8.5 py-2 lg:py-3.25 rounded-full">
            Мои курсы
          </a>
          
          <a href="{% url 'courses:course_results' %}"
            class="max-lg:hidden font-semibold border-gradient px-5 lg:px-8.5 py-2 lg:py-3.25 rounded-full">
            Результаты
          </a>

          <a href="{% url 'course-catalogue' %}"
            class="max-lg:hidden bg-gradient-display hover-opacity-75 text-primary rounded-full px-5 lg:px-8.5 py-2 lg:py-3.25">
            Программа курса
          </a>

          <div class="ml-9">
            <a href="{% url 'profile' %}" class="flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity">
              <div class="size-11 lg:size-15 overflow-hidden rounded-full bg-gradient-display flex items-center justify-center">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" fill="white"/>
                  <path d="M12 14C7.58172 14 4 17.5817 4 22H20C20 17.5817 16.4183 14 12 14Z" fill="white"/>
                </svg>
              </div>

              <p class="max-lg:hidden">
                {{ user.first_name|default:"Пользователь" }} {{ user.last_name|default:"" }}
              </p>

              <svg class="shrink-0" width="10" height="8" viewBox="0 0 10 8" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M4.99997 7.49998L0.0498047 2.54981L1.70064 0.900146L4.99997 4.20065L8.2993 0.900146L9.95014 2.54981L4.99997 7.49998Z"
                  fill="url(#paint0_linear_2070_127)" />
                <defs>
                  <linearGradient id="paint0_linear_2070_127" x1="7.73173" y1="1.71285" x2="3.05672" y2="6.28661"
                    gradientUnits="userSpaceOnUse">
                    <stop stop-color="#AB803B" />
                    <stop offset="0.235294" stop-color="#CDB14F" />
                    <stop offset="0.490196" stop-color="#F0E263" />
                    <stop offset="0.733333" stop-color="#D9B84A" />
                    <stop offset="1" stop-color="#C28D31" />
                  </linearGradient>
                </defs>
              </svg>
            </a>
          </div>
          <!-- Mobile Menu -->
          <button @click="open = true" class="transition duration-200 hover:text-brand-yellow-500">
            <svg width="20" height="20" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M0.25 0.666626H25.75V3.49996H0.25V0.666626ZM0.25 10.5833H25.75V13.4166H0.25V10.5833ZM0.25 20.5H25.75V23.3333H0.25V20.5Z"
                fill="currentColor" />
            </svg>
          </button>
        </div>
      </nav>

      <!-- Overlay + Mobile Menu -->
      <div x-show="open" class="fixed inset-0 z-40" x-transition.opacity>
        <!-- Overlay -->
        <div class="absolute inset-0 bg-primary/50" @click="open = false">
        </div>

        <!-- Slide Menu -->
        <div
          class="absolute top-0 right-0 w-64 h-full bg-primary shadow-lg p-6 pt-10 transform transition-transform duration-700 ease-in-out"
          :class="open ? 'translate-x-0' : 'translate-x-full'" @click.stop>
          <!-- Close Button -->
          <button @click="open = false"
            class="mb-14 text-white transition duration-200 hover:text-brand-yellow-500 block w-fit ml-auto">
            <svg width="20" height="20" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M0.25 0.666626H25.75V3.49996H0.25V0.666626ZM0.25 10.5833H25.75V13.4166H0.25V10.5833ZM0.25 20.5H25.75V23.3333H0.25V20.5Z"
                fill="currentColor" />
            </svg>
          </button>

          <!-- Links -->
          <div class="flex flex-col gap-3 text-white !text-lg mb-7">
            <a href="{% url 'about' %}" class="text-white transition duration-200 hover:text-brand-yellow-500">
              О нас
            </a>
            <a href="{% url 'services' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
              Услуги
            </a>
            <div class="relative group">
              <a class="text-white flex items-center gap-3.5 transition duration-200 hover:text-brand-yellow-500"
                href="{% url 'course-catalogue' %}">
                <span>
                  Каталог курсов
                </span>
                <svg width="14" height="8" viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M6.99999 5.17192L11.95 0.221924L13.364 1.63592L6.99999 7.99992L0.635986 1.63592L2.04999 0.221924L6.99999 5.17192Z"
                    fill="url(#paint0_linear_4001_5)" />
                  <defs>
                    <linearGradient id="paint0_linear_4001_5" x1="10.512" y1="1.1797" x2="5.01273" y2="7.04877"
                      gradientUnits="userSpaceOnUse">
                      <stop stop-color="#AB803B" />
                      <stop offset="0.235294" stop-color="#CDB14F" />
                      <stop offset="0.490196" stop-color="#F0E263" />
                      <stop offset="0.733333" stop-color="#D9B84A" />
                      <stop offset="1" stop-color="#C28D31" />
                    </linearGradient>
                  </defs>
                </svg>
              </a>

              <div class="absolute z-10 hidden bg-white rounded-lg w-full p-3 space-y-1.5">
                <a class="block text-primary hover-opacity-75" href="{% url 'course-catalogue' %}">
                  Каталог курсов
                </a>
                <a class="block text-primary hover-opacity-75" href="{% url 'services' %}">
                  Услуги
                </a>
              </div>
            </div>
            <a href="{% url 'referal' %}" class="text-white transition duration-200 hover:text-brand-yellow-500">
              Предложения
            </a>
            <a href="{% url 'blog' %}" class="text-white transition duration-200 hover:text-brand-yellow-500">
              Блог
            </a>
            <a href="{% url 'reviews' %}" class="text-white transition duration-200 hover:text-brand-yellow-500">
              Отзывы
            </a>
            <a href="{% url 'contacts' %}" class="text-white transition duration-200 hover:text-brand-yellow-500">
              Контакты
            </a>
          </div>

          <div class="flex lg:hidden flex-col text-center gap-3">
            <a href="{% url 'courses:my_courses' %}" class="font-semibold border-gradient px-5 lg:px-8.5 py-2 lg:py-3.25">
              Мои курсы
            </a>
            
            <a href="{% url 'courses:course_results' %}" class="font-semibold border-gradient px-5 lg:px-8.5 py-2 lg:py-3.25">
              Результаты
            </a>

            <a href="{% url 'course-catalogue' %}"
              class="bg-gradient-display hover-opacity-75 text-primary rounded-full px-5 lg:px-8.5 py-2 lg:py-3.25">
              Программа курса
            </a>
          </div>
        </div>
      </div>
    </header>
  {% else %}
    <!-- Not logged in user header -->
    <header x-data="{ open: false }"
      x-init="$watch('open', value => document.body.classList.toggle('overflow-hidden', value))" class="py-6">
      <nav class="container-base flex items-center justify-between gap-5">
        <!-- Logo -->
        <a href="{% url 'home' %}">
          <img class="h-16 md:h-20 lg:h-26" src="{% static 'assets/svgs/logo.svg' %}" alt="Logo">
        </a>

        <!-- Links -->
        <div class="max-[1200px]:hidden flex items-center gap-9.5">
          <a href="{% url 'about' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            О нас
          </a>
          <a href="{% url 'services' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Услуги
          </a>

          <div class="relative group">
            <a class="flex items-center gap-3.5 transition duration-200 hover:text-brand-yellow-500"
              href="{% url 'course-catalogue' %}">
              <span class="text-lg">
                Каталог курсов
              </span>
              <svg width="14" height="8" viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M6.99999 5.17192L11.95 0.221924L13.364 1.63592L6.99999 7.99992L0.635986 1.63592L2.04999 0.221924L6.99999 5.17192Z"
                  fill="url(#paint0_linear_4001_5)" />
                <defs>
                  <linearGradient id="paint0_linear_4001_5" x1="10.512" y1="1.1797" x2="5.01273" y2="7.04877"
                    gradientUnits="userSpaceOnUse">
                    <stop stop-color="#AB803B" />
                    <stop offset="0.235294" stop-color="#CDB14F" />
                    <stop offset="0.490196" stop-color="#F0E263" />
                    <stop offset="0.733333" stop-color="#D9B84A" />
                    <stop offset="1" stop-color="#C28D31" />
                  </linearGradient>
                </defs>
              </svg>
            </a>

            <div class="absolute z-10 hidden group-hover:block bg-white w-55 rounded-lg p-3 space-y-1.5">
              <a class="block text-primary hover-opacity-75" href="{% url 'course-catalogue' %}">
                Каталог курсов
              </a>
              <a class="block text-primary hover-opacity-75" href="{% url 'services' %}">
                Услуги
              </a>
            </div>
          </div>
          <a href="{% url 'referal' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Предложения
          </a>
          <a href="{% url 'blog' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Блог
          </a>
          <a href="{% url 'reviews' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Отзывы
          </a>
          <a href="{% url 'contacts' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
            Контакты
          </a>
        </div>

        <!-- Login & Mobile Menu -->
        <div class="flex items-center gap-6 font-semibold">
          <a href="{% url 'login' %}" class="font-semibold border-gradient px-5 lg:px-8.5 py-2 lg:py-3.25">
            Войти
          </a>

          <!-- Mobile Menu -->
          <button @click="open = true" class="min-[1200px]:hidden transition duration-200 hover:text-brand-yellow-500">
            <svg width="20" height="20" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M0.25 0.666626H25.75V3.49996H0.25V0.666626ZM0.25 10.5833H25.75V13.4166H0.25V10.5833ZM0.25 20.5H25.75V23.3333H0.25V20.5Z"
                fill="currentColor" />
            </svg>
          </button>
        </div>
      </nav>

      <!-- Overlay + Mobile Menu -->
      <div x-show="open" class="fixed inset-0 z-40 min-[1200px]:hidden" x-transition.opacity>
        <!-- Overlay -->
        <div class="absolute inset-0 bg-primary/50" @click="open = false">
        </div>

        <!-- Slide Menu -->
        <div
          class="absolute top-0 right-0 w-64 h-full bg-primary shadow-lg p-6 pt-10 transform transition-transform duration-700 ease-in-out"
          :class="open ? 'translate-x-0 transition duration-700' : 'translate-x-full transition duration-700'" @click.stop>
          <!-- Close Button -->
          <button @click="open = false" class="mb-14 text-white transition duration-200 hover:text-brand-yellow-500 block w-fit ml-auto">
            <svg width="20" height="20" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M0.25 0.666626H25.75V3.49996H0.25V0.666626ZM0.25 10.5833H25.75V13.4166H0.25V10.5833ZM0.25 20.5H25.75V23.3333H0.25V20.5Z"
                fill="currentColor" />
            </svg>
          </button>

          <!-- Links -->
          <div class="flex flex-col gap-3 text-white !text-lg">
            <a href="{% url 'about' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
              О нас
            </a>
            <a href="{% url 'services' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
              Услуги
            </a>

            <div class="relative group">
              <a class="flex items-center gap-3.5 transition duration-200 hover:text-brand-yellow-500"
                href="{% url 'course-catalogue' %}">
                <span class="text-lg">
                  Каталог курсов
                </span>
                <svg width="14" height="8" viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M6.99999 5.17192L11.95 0.221924L13.364 1.63592L6.99999 7.99992L0.635986 1.63592L2.04999 0.221924L6.99999 5.17192Z"
                    fill="url(#paint0_linear_4001_5)" />
                  <defs>
                    <linearGradient id="paint0_linear_4001_5" x1="10.512" y1="1.1797" x2="5.01273" y2="7.04877"
                      gradientUnits="userSpaceOnUse">
                      <stop stop-color="#AB803B" />
                      <stop offset="0.235294" stop-color="#CDB14F" />
                      <stop offset="0.490196" stop-color="#F0E263" />
                      <stop offset="0.733333" stop-color="#D9B84A" />
                      <stop offset="1" stop-color="#C28D31" />
                    </linearGradient>
                  </defs>
                </svg>
              </a>

              <div class="absolute z-10 hidden bg-white w-55 rounded-lg p-3 space-y-1.5">
                <a class="block text-primary hover-opacity-75" href="{% url 'course-catalogue' %}">
                  Каталог курсов
                </a>
                <a class="block text-primary hover-opacity-75" href="{% url 'services' %}">
                  Услуги
                </a>
              </div>
            </div>
            <a href="{% url 'referal' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
              Предложения
            </a>
            <a href="{% url 'blog' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
              Блог
            </a>
            <a href="{% url 'reviews' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
              Отзывы
            </a>
            <a href="{% url 'contacts' %}" class="transition duration-200 hover:text-brand-yellow-500 ">
              Контакты
            </a>
          </div>
        </div>
      </div>
    </header>
  {% endif %}

  <!-- Main Content -->
  <main class="container-base">
    {% block content %}
    {% endblock %}
  </main>

  <!-- FAQ Section - Show on all pages except course-catalogue -->
  {% if request.resolver_match.url_name != 'course-catalogue' %}
    {% include 'components/faq_component.html' %}
{% endif %}

  <!-- Footer -->
  <footer class="container-base mb-6">
    <div class="flex max-lg:flex-col items-center justify-between gap-x-5 gap-y-11">
      <div class="flex items-center gap-15">
        <a class="shrink-0 block" href="{% url 'home' %}">
          <img class="h-26" src="{% static 'assets/svgs/logo.svg' %}" alt="Logo">
        </a>
        <p class="font-medium max-lg:hidden text-lg leading-none text-brand-gray-100/50">
          © 2025 «Profactive»
        </p>
      </div>

      <div class="flex max-lg:flex-col items-center gap-x-11 gap-y-3.5">
        {% if main_header and main_header.privacy_policy_file %}
        <a href="{{ main_header.privacy_policy_file.url }}"
          class="font-medium underline underline-offset-4 text-brand-gray-100 transition duration-200 hover:text-brand-yellow-500">
          Политика конфиденциальности
        </a>
        {% else %}
        <a href="#"
          class="font-medium underline underline-offset-4 text-brand-gray-100 transition duration-200 hover:text-brand-yellow-500">
          Политика конфиденциальности
        </a>
        {% endif %}
        <a href="{% url 'documents' %}"
          class="font-medium underline underline-offset-4 text-brand-gray-100 transition duration-200 hover:text-brand-yellow-500">
          Документация
        </a>
      </div>

      <p class="font-medium lg:hidden leading-none text-brand-gray-100/50">
        © 2025 «Profactive»
      </p>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <!-- AOS JS -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <!-- Alpine.js -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  
  {% block extra_js %}
  <script>
    function showMore(step = 6) {
      return {
        step,
        visible: step,
        items: [],
        buttonText: "Показать еще новости",

        init() {
          this.items = this.$el.querySelectorAll(".grid > div");
          this.update();
        },

        update() {
          this.items.forEach((el, i) => {
            el.style.display = i < this.visible ? "block" : "none";
          });

          if (this.visible < this.items.length) {
            this.buttonText = "Показать еще";
          } else {
            this.buttonText = "Скрыть";
          }
        },

        toggle() {
          if (this.visible < this.items.length) {
            this.visible += this.step;
          } else {
            this.visible = this.step;
          }
          this.update();
        }
      }
    }
  </script>
  <script src="{% static 'js/app.js' %}"></script>
  
  <!-- AOS JS -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
  <!-- Initialize AOS -->
  <script>
    AOS.init({
      duration: 800,
      easing: 'ease-in-out',
      once: true,
      offset: 100
    });
  </script>
  {% endblock %}
</body>

</html>
